<!-- templates/dfrm_admin/facility_detail.html -->
{% extends "base.html" %}
{% load static %}
{% load leaflet_tags %}

{% block head %}
    {% leaflet_css %}
    {% leaflet_js %}
{% endblock head %}

{% block header %}
<div class="page-header">
    <div class="black-background">
        <div class="container">
            <h1>{{ facility.name }}</h1>
        </div>
    </div>
</div>
{% endblock header %}

{% block content %}

<div class="edit-content">
    {% if perms.dfrm_admin.change_facility %}
        <a href="{% url 'facility_edit' pk=facility.pk %}" class="btn btn-primary"><div class="button">Edit Facility Content</div></a>
    {% endif %}
</div>

<div class="d-flex flex-row justify-content-around align-items-center">
    <div class="p-2">
        <img src="{{ facility.facility_image.url }}">
        <p>Phone Number: {{ facility.phone_number }} </p>
        {% if facility.fax_number %}
            <p>Fax Number: {{ facility.fax_number }} </p>
        {% endif %}
        <p> {{ facility.street_address }} </p>
        <p> {{ facility.city }}, {{ facility.state }} {{ facility.zipcode }} </p>
        <p> Manager: {{ facility.manager }} </p>
        {% if office.administrative_assistant %}
            <p>Administrative Assistant: {{ facility.facility.administrative_assistant }} </p>
        {% endif %}
    </div>
    <div class="p-2">
        <style>
            .leaflet-container {
                width: 500px;
                height: 400px;
                margin-top: 10px;
                margin-bottom: 10px;
            }
        </style>
        
        <script type="text/javascript">
            function map_init_basic(map, options) {
        
            var lon = "{{ facility.name.point.geometry.x }}"
            var lat = "{{ facility.name.point.geometry.y }}"
        
            map.setView([lat, lon], 12);
            L.marker([lat, lon]).addTo(map);
            }
        
        </script>

        {% leaflet_map "main" callback="map_init_basic" %}
    </div>
</div>

{% endblock %}